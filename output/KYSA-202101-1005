Name:KYSA-202101-1005
Severity:重要
Summary:sudo 漏洞
Published:2021-01-29
URL:/support/loophole/patch/345.html
Title:
			公告ID：KYSA-202101-1005
公告摘要：sudo安全漏洞
安全等级：Important
发布日期：2021年01月01日
影响CVE：CVE-2019-14287、CVE-2019-18634、CVE-2021-3156

		
1. 修复的CVE·CVE-2019-14287描述：在sudo实现使用任意用户ID运行命令的方式中发现了一个缺陷。如果sudoers条目被写入以允许攻击者以root以外的任何用户身份运行命令，则攻击者可以利用该缺陷绕过该限制。·CVE-2019-18634描述：当sudoers文件上的“pwfeedback”选项设置为true时，在Sudo应用程序中发现了一个缺陷。在某些情况下，即使没有Sudo权限，经过身份验证的用户也可以使用此漏洞触发基于堆栈的缓冲区溢出。缓冲区溢出可能使攻击者暴露或损坏内存信息，使Sudo应用程序崩溃，或者可能注入要作为根用户运行的代码。·CVE-2021-3156描述：Sudo是一款使用于类Unix系统的，允许用户通过安全的方式使用特殊的权限执行命令的程序。 Sudo before 1.9.5p2 存在缓冲区错误漏洞，攻击者可使用sudoedit -s和一个以单个反斜杠字符结束的命令行参数升级到root。2. 受影响的软件包·银河麒麟高级服务器操作系统 V10aarch64架构:sudo、sudo-develx86_64架构:sudo、sudo-devel·中标麒麟高级服务器操作系统 V7aarch64架构:sudo、sudo-develx86_64架构:sudo、sudo-devel·中标麒麟高级服务器操作系统 V6x86_64架构:sudo、sudo-devel·银河麒麟高级服务器操作系统 V10 SP1aarch64架构:sudo、sudo-devel、sudo-helpmips64el架构:sudo、sudo-devel、sudo-helpx86_64架构:sudo、sudo-devel、sudo-help3. 软件包修复版本·银河麒麟高级服务器操作系统 V10sudo-1.8.23-10.el7_9.1sudo-devel-1.8.23-10.el7_9.1·中标麒麟高级服务器操作系统 V7sudo-1.8.23-10.el7_9.1sudo-devel-1.8.23-10.el7_9.1·中标麒麟高级服务器操作系统 V6sudo-1.8.6p3-29.el6_10.3.ns6.01sudo-devel-1.8.6p3-29.el6_10.3.ns6.01·银河麒麟高级服务器操作系统 V10 SP1sudo-1.9.2-2.ky10sudo-devel-1.9.2-2.ky10sudo-help-1.9.2-2.ky104. 修复方法方法一：配置源进行升级安装1. 打开软件包源配置文件，根据仓库地址进行修改。仓库源地址： 银河麒麟高级服务器操作系统 V10aarch64:https://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/aarch64/x86_64:https://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/x86_64/中标麒麟高级服务器操作系统 V7aarch64:https://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/aarch64/x86_64:https://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/x86_64/银河麒麟高级服务器操作系统 V10 SP1aarch64:https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/aarch64/mips64el:https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/mips64el/x86_64:https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/x86_64/中标麒麟高级服务器操作系统 V6x86_64:https://update.cs2c.com.cn/NS/V6/V6.10/os/lic/updates/x86_64/2. 配置完成后执行更新命令进行升级，命令如下：yum update Packagename方法二：下载安装包进行升级安装通过软件包地址下载软件包，使用软件包升级命令根据受影响的软件包列表进行升级安装,命令如下：yum install Packagename3. 升级完成后是否需要重启服务或操作系统：·CVE-2019-14287：无需重启操作系统与服务即可使漏洞修复生效。·CVE-2019-18634：无需重启操作系统与服务即可使漏洞修复生效。·CVE-2021-3156：无需重启操作系统与服务即可使漏洞修复生效。5. 软件包下载地址·银河麒麟高级服务器操作系统 V10 sudo（aarch64）软件包下载地址:https://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/aarch64/Packages/sudo-1.8.23-10.el7_9.1.aarch64.rpmhttps://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/aarch64/Packages/sudo-devel-1.8.23-10.el7_9.1.aarch64.rpm sudo（x86_64）软件包下载地址:https://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/x86_64/Packages/sudo-1.8.23-10.el7_9.1.x86_64.rpmhttps://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/x86_64/Packages/sudo-devel-1.8.23-10.el7_9.1.i686.rpmhttps://update.cs2c.com.cn/NS/V10/V10-ZJ/os/adv/lic/updates/x86_64/Packages/sudo-devel-1.8.23-10.el7_9.1.x86_64.rpm ·中标麒麟高级服务器操作系统 V7 sudo（aarch64）软件包下载地址:https://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/aarch64/Packages/sudo-1.8.23-10.el7_9.1.aarch64.rpmhttps://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/aarch64/Packages/sudo-devel-1.8.23-10.el7_9.1.aarch64.rpm sudo（x86_64）软件包下载地址:https://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/x86_64/Packages/sudo-1.8.23-10.el7_9.1.x86_64.rpmhttps://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/x86_64/Packages/sudo-devel-1.8.23-10.el7_9.1.i686.rpmhttps://update.cs2c.com.cn/NS/V7/V7Update9/os/adv/lic/updates/x86_64/Packages/sudo-devel-1.8.23-10.el7_9.1.x86_64.rpm ·银河麒麟高级服务器操作系统 V10 SP1 sudo（aarch64）软件包下载地址:https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/aarch64/Packages/sudo-1.9.2-2.ky10.aarch64.rpmhttps://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/aarch64/Packages/sudo-devel-1.9.2-2.ky10.aarch64.rpmhttps://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/aarch64/Packages/sudo-help-1.9.2-2.ky10.noarch.rpm sudo（mips64el）软件包下载地址:https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/mips64el/Packages/sudo-1.9.2-2.ky10.mips64el.rpmhttps://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/mips64el/Packages/sudo-devel-1.9.2-2.ky10.mips64el.rpmhttps://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/mips64el/Packages/sudo-help-1.9.2-2.ky10.noarch.rpm sudo（x86_64）软件包下载地址:https://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/x86_64/Packages/sudo-1.9.2-2.ky10.x86_64.rpmhttps://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/x86_64/Packages/sudo-devel-1.9.2-2.ky10.x86_64.rpmhttps://update.cs2c.com.cn/NS/V10/V10SP1.1/os/adv/lic/base/x86_64/Packages/sudo-help-1.9.2-2.ky10.noarch.rpm ·中标麒麟高级服务器操作系统 V6 sudo（x86_64）软件包下载地址:https://update.cs2c.com.cn/NS/V6/V6.10/os/lic/updates/x86_64/Packages/sudo-1.8.6p3-29.el6_10.3.ns6.01.x86_64.rpmhttps://update.cs2c.com.cn/NS/V6/V6.10/os/lic/updates/x86_64/Packages/sudo-devel-1.8.6p3-29.el6_10.3.ns6.01.i686.rpmhttps://update.cs2c.com.cn/NS/V6/V6.10/os/lic/updates/x86_64/Packages/sudo-devel-1.8.6p3-29.el6_10.3.ns6.01.x86_64.rpm 注：其他相关依赖包请到相同目录下载6. 修复验证使用软件包查询命令，查看相关软件包版本是否与修复版本一致，如果版本一致，则说明修复成功。sudo rpm -qa | grep Packagename
