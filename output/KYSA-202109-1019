Name:KYSA-202109-1019
Severity:中等
Summary:ruby漏洞
Published:2021-09-10
URL:/support/loophole/patch/504.html
Title:
			摘要：ruby漏洞
安全等级：中等
公告ID：KYSA-202109-1019
发布日期：2021-09-10
影响CVE：CVE-2021-31799、CVE-2021-31810、CVE-2021-32066
		
1. 修复的CVE信息CVE-2021-31799描述：在 6.3.1 之前的 RDoc 3.11 到 6.x 中，随着 Ruby 到 3.0.1 分发，可以通过 | 执行任意代码和文件名中的标签。CVE-2021-31810描述：在 Ruby 2.6.7、2.7.x 至 2.7.3 和 3.x 至 3.0.1 中发现了一个问题。恶意 FTP 服务器可以使用 PASV 响应来欺骗 Net::FTP 连接回给定的 IP 地址和端口。这可能使 curl 提取有关其他私有且未公开的服务的信息（例如，攻击者可以进行端口扫描和服务横幅提取）。CVE-2021-32066描述：在 Ruby 2.6.7、2.7.x 至 2.7.3 和 3.x 至 3.0.1 中发现了一个问题。当 StartTLS 失败并返回未知响应时，Net::IMAP 不会引发异常，这可能允许中间人攻击者通过利用客户端和注册表之间的网络位置来阻止 StartTLS 命令来绕过 TLS 保护，又名“StartTLS 剥离攻击”。2. 影响的操作系统及修复版本银河麒麟高级服务器操作系统 V10 SP1ruby-2.5.8-114.ky10ruby-debugsource-2.5.8-114.ky10ruby-devel-2.5.8-114.ky10ruby-help-2.5.8-114.ky10ruby-irb-2.5.8-114.ky10rubygem-bigdecimal-1.3.4-114.ky10rubygem-did_you_mean-1.2.0-114.ky10rubygem-io-console-0.4.6-114.ky10rubygem-json-2.1.0-114.ky10rubygem-minitest-5.10.3-114.ky10rubygem-net-telnet-0.1.1-114.ky10rubygem-openssl-2.1.2-114.ky10rubygem-power_assert-1.1.1-114.ky10rubygem-psych-3.0.2-114.ky10rubygem-rake-12.3.0-114.ky10rubygem-rdoc-6.0.1.1-114.ky10rubygem-test-unit-3.2.7-114.ky10rubygem-xmlrpc-0.3.0-114.ky10rubygems-2.7.6-114.ky10rubygems-devel-2.7.6-114.ky10银河麒麟高级服务器操作系统 V10 SP2ruby-2.5.8-114.ky10ruby-debugsource-2.5.8-114.ky10ruby-devel-2.5.8-114.ky10ruby-help-2.5.8-114.ky10ruby-irb-2.5.8-114.ky10rubygem-bigdecimal-1.3.4-114.ky10rubygem-did_you_mean-1.2.0-114.ky10rubygem-io-console-0.4.6-114.ky10rubygem-json-2.1.0-114.ky10rubygem-minitest-5.10.3-114.ky10rubygem-net-telnet-0.1.1-114.ky10rubygem-openssl-2.1.2-114.ky10rubygem-power_assert-1.1.1-114.ky10rubygem-psych-3.0.2-114.ky10rubygem-rake-12.3.0-114.ky10rubygem-rdoc-6.0.1.1-114.ky10rubygem-test-unit-3.2.7-114.ky10rubygem-xmlrpc-0.3.0-114.ky10rubygems-2.7.6-114.ky10rubygems-devel-2.7.6-114.ky103. 受影响的软件包银河麒麟高级服务器操作系统 V10 SP1aarch64:ruby、ruby-debugsource、ruby-devel、ruby-help、ruby-irb、rubygem-bigdecimal、rubygem-did_you_mean、rubygem-io-console、rubygem-json、rubygem-minitest、rubygem-net-telnet、rubygem-openssl、rubygem-power_assert、rubygem-psych、rubygem-rake、rubygem-rdoc、rubygem-test-unit、rubygem-xmlrpc、rubygems、rubygems-develx86_64:ruby、ruby-debugsource、ruby-devel、ruby-help、ruby-irb、rubygem-bigdecimal、rubygem-did_you_mean、rubygem-io-console、rubygem-json、rubygem-minitest、rubygem-net-telnet、rubygem-openssl、rubygem-power_assert、rubygem-psych、rubygem-rake、rubygem-rdoc、rubygem-test-unit、rubygem-xmlrpc、rubygems、rubygems-devel银河麒麟高级服务器操作系统 V10 SP2aarch64:ruby、ruby-debugsource、ruby-devel、ruby-help、ruby-irb、rubygem-bigdecimal、rubygem-did_you_mean、rubygem-io-console、rubygem-json、rubygem-minitest、rubygem-net-telnet、rubygem-openssl、rubygem-power_assert、rubygem-psych、rubygem-rake、rubygem-rdoc、rubygem-test-unit、rubygem-xmlrpc、rubygems、rubygems-develx86_64:ruby、ruby-debugsource、ruby-devel、ruby-help、ruby-irb、rubygem-bigdecimal、rubygem-did_you_mean、rubygem-io-console、rubygem-json、rubygem-minitest、rubygem-net-telnet、rubygem-openssl、rubygem-power_assert、rubygem-psych、rubygem-rake、rubygem-rdoc、rubygem-test-unit、rubygem-xmlrpc、rubygems、rubygems-devel4. 修复方法方法一：配置源进行升级安装1.打开软件包源配置文件，根据仓库地址进行修改。仓库源地址：银河麒麟高级服务器操作系统 V10 SP1aarch64:http://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/ x86_64:http://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/ 银河麒麟高级服务器操作系统 V10 SP2aarch64:http://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/ x86_64:http://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/2.配置完成后执行更新命令进行升级，命令如下：yum update Packagename方法二：下载安装包进行升级安装通过软件包地址下载软件包，使用软件包升级命令根据受影响的软件包列表进行升级安装,命令如下：yum install Packagename5. 软件包下载地址银河麒麟高级服务器操作系统 V10 SP1 ruby aarch64软件包下载地址:http://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/ruby-2.5.8-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/ruby-debugsource-2.5.8-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/ruby-devel-2.5.8-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/ruby-help-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/ruby-irb-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-bigdecimal-1.3.4-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-did_you_mean-1.2.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-io-console-0.4.6-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-json-2.1.0-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-minitest-5.10.3-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-net-telnet-0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-openssl-2.1.2-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-power_assert-1.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-psych-3.0.2-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-rake-12.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-rdoc-6.0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-test-unit-3.2.7-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygem-xmlrpc-0.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygems-2.7.6-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/aarch64/Packages/rubygems-devel-2.7.6-114.ky10.noarch.rpm ruby x86_64软件包下载地址:http://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/ruby-2.5.8-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/ruby-debugsource-2.5.8-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/ruby-devel-2.5.8-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/ruby-help-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/ruby-irb-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-bigdecimal-1.3.4-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-did_you_mean-1.2.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-io-console-0.4.6-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-json-2.1.0-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-minitest-5.10.3-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-net-telnet-0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-openssl-2.1.2-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-power_assert-1.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-psych-3.0.2-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-rake-12.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-rdoc-6.0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-test-unit-3.2.7-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygem-xmlrpc-0.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygems-2.7.6-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP1.1/os/adv/lic/updates/x86_64/Packages/rubygems-devel-2.7.6-114.ky10.noarch.rpm银河麒麟高级服务器操作系统 V10 SP2 ruby aarch64软件包下载地址:http://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/ruby-2.5.8-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/ruby-debugsource-2.5.8-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/ruby-devel-2.5.8-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/ruby-help-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/ruby-irb-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-bigdecimal-1.3.4-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-did_you_mean-1.2.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-io-console-0.4.6-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-json-2.1.0-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-minitest-5.10.3-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-net-telnet-0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-openssl-2.1.2-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-power_assert-1.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-psych-3.0.2-114.ky10.aarch64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-rake-12.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-rdoc-6.0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-test-unit-3.2.7-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygem-xmlrpc-0.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygems-2.7.6-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/aarch64/Packages/rubygems-devel-2.7.6-114.ky10.noarch.rpm ruby x86_64软件包下载地址:http://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/ruby-2.5.8-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/ruby-debugsource-2.5.8-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/ruby-devel-2.5.8-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/ruby-help-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/ruby-irb-2.5.8-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-bigdecimal-1.3.4-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-did_you_mean-1.2.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-io-console-0.4.6-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-json-2.1.0-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-minitest-5.10.3-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-net-telnet-0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-openssl-2.1.2-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-power_assert-1.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-psych-3.0.2-114.ky10.x86_64.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-rake-12.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-rdoc-6.0.1.1-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-test-unit-3.2.7-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygem-xmlrpc-0.3.0-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygems-2.7.6-114.ky10.noarch.rpmhttp://update.cs2c.com.cn:8080/NS/V10/V10SP2/os/adv/lic/updates/x86_64/Packages/rubygems-devel-2.7.6-114.ky10.noarch.rpm注：其他相关依赖包请到相同目录下载 
